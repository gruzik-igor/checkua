Service "Shop Showcase 1.0"
for WhiteLion 1.0

Author: Ostap Matskiv
Date 1.0 : 02.09.2014

Description: Магазин-вітрина (перелік товарів БЕЗ можливості їх замовити та оплатити). Мультимовний. Автовиправлення адрес (лінків) товарів.
Options:
	useGroups	(0, 1)		наявність категорій в яких можуть знаходитися товари
	ProductMultiGroup	(0, 1) один товар більше ніж в одній категорії
	resize		(0, 1)		при заливанні фото на сервер здійсювати створення мініатюр, зміну розмірів
	folder		(текст)		назва папки у IMG_PATH, куди будуть заливатися фото, створюватися альбоми
	canAdd		(1, 2, 4) 	мінімальний рівень доступу (згідно wl_user_types) для додавання фото, створення альбомів

Path photos after uploading:
	IMG_PATH / folder / (s_) id_product . jpg
	IMG_PATH / folder / groups / (s_) id_group . jpg

SEO (name, title, keywords, description) for albums use wl_ntkd (content: id_product, content: -id_group)

Tables:
	s_shopshowcase_products			перелік товарів
		`id` int(11) AUTO_INCREMENT,
		`link` text,		кінцева адреса товару (включно з ід товару)
		`group` int(11)		ід групи товару
		`price` int(11)		ціна товару
		`position` int(11)	позиція у списку
		`photo` int(11),	наявність фото: 0 - ні, номер фото
		`active` tinyint(1),поточний стан товару (0 - відключено, 1 - активний)
		`user` int(11),		хто додав
		`date` int(11)		дата додачі (The Unix Epoch)
	s_shopshowcase_group_options 	перелік опцій, що доступні для товарів. Присвоюються групам із успадкуванням
		`id` int(11) AUTO_INCREMENT,
		`group` int(11),	ід батьківської групи
		`link` int(11),		адреса опції (для СЕО фільтра)
		`position` text,	позиція у списку
		`type` int(11)		тип опції згідно wl_input_types
		`filter` tinyint(1)	чи є даний елемент опції і елементом фільтру (тільки для строго визначений елементів: radio, select..)
		`active` tinyint(1)	поточний стан (0 - відключено, 1 - активний)
	s_shopshowcase_product_options 	поточні дані опція товару - товар
		`id` int(11) AUTO_INCREMENT,
		`product` int(11),	ід товару
		`option` int(11),	ід опціїї
		`value` text		значення
	s_shopshowcase_options_name		дані пареметрів товару
		`id` int(11),
		`option` int(11),	ід опції або -ід властивості опції
		`language` varchar(2),	мова, якщо є мультимовний
		`name` text,		назва опції/параметру
		`sufix` text,		суфікс (автоматично додається після тексту опції - розмірність величини)

	if options['useGroups'] > 0
	s_shopshowcase_groups 			перелік груп товарів
		`id` int(11) AUTO_INCREMENT,
		`link` text,		кінцева адреса групи
		`parent` int(11)	батьківська група
		`position` int(11)	позиція групи
		`photo` int(11),	наявність фото: 0 - ні, ід - номер фото
		`active` tinyint(1),поточний стан (0 - відключено, 1 - активний)
		`user` int(11),		хто додав
		`date` int(11)		дата додачі (The Unix Epoch)

	if options['ProductMultiGroup'] > 0
	s_shopshowcase_product_group 	для МУЛЬТИТОВАРГРУПА. Один товар - декілька груп
		`product` int(11)	ід товару
		`group` int(11)		ід групи

	if options['resize'] > 0
	s_shopshowcase_photo_size 			зміна розмірів зображення (якщо активно option:resize)
		`id` int(11) AUTO_INCREMENT,
		`alias` int(11)		активний аліас
		`active` tinyint(1),поточний стан (0 - відключено, 1 - активний)
		`name` text,		назва мініатюри
		`prefix` varchar(2),префікс мініатюри, без розділювача
		`type` tinyint(1),	тип мініатюри: 1 resize, 2 preview
		`height` int(11),	висота мініатюри
		`width` int(11)		ширина мініатюри

Public links:
	/index() - main page, list of active groups or products sorted by `position`
	/index()/../id - link - detal info about product
	/admin/ => index(admin = true) - manage of product or group
	/all - list of all products sorted by `position`
	/add - form add product
	/edit/id or /edit($id) - form edit product by id product
	/groups - list all groups
	/add_group - form to add new group
	/edit_group/id - form to edit group
	/options - list of all options
	/add_option - form to add option



Private (work) links:
	/save - procedure to save or creating new product
	/delete - procedure to delete product
	/changeposition - procedure to change product position in list
	/changeGroup (ajax) - procedure to set new product group
	/changeAvailability (ajax) - procedure to set new availability of product
	/save_group - procedure to save or creating new group
	/delete_group - procedure to delete group (+ with products)
	/change_group_position - procedure to change group position in list
	/savephoto (private) - function which save and make resize photo
	/deleteProductsByGroup (private) - from DELETE_GROUP() to delete all products by group and subgroups
	/save_option - procedure to save or creating new product option for group
	/delete_option - procedure to delete product option
	/change_option_position - procedure to change option position in list
	/deleteOptionProperty (ajax) - delete option property


Versions:
	1.0 	Основу сервісу взято із сервісу library 1.0. Відносно оснтаннього внесено зміни: стаття -> товар, категорія -> група. Функціонал груп перероблено на деревовидну структуру без обмежень по вкладанні. Авто виправлення лінків товарів. Розроблено можливість задавати властивості товарів із ієрархією груп для кожної групи товарів.

	1.1 	Додано можливість створювати елементи фільтра із опцій. При редагуванні товару додано можливість вибору сторінки переходу. Виправлено помилки.